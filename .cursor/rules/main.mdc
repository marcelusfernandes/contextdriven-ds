---
description: Design System Main Rules - Regras gerais de implementaÃ§Ã£o, workflow e organizaÃ§Ã£o de arquivos - Applies to all component development
alwaysApply: true
---
# Design System - Regras Principais de ImplementaÃ§Ã£o

> **Este Ã© o ponto de entrada** para as regras do Design System. Leia este arquivo primeiro para entender o workflow geral, depois consulte as regras especÃ­ficas para detalhes de implementaÃ§Ã£o.

## ğŸ“– Sobre Este Documento

**O que Ã©:** Guideline geral e workflow de implementaÃ§Ã£o  
**O que NÃƒO Ã©:** EspecificaÃ§Ãµes detalhadas de implementaÃ§Ã£o

Este documento define:
- âœ… Workflow completo de implementaÃ§Ã£o
- âœ… Quando usar cada regra especÃ­fica
- âœ… Checklist geral
- âœ… OrganizaÃ§Ã£o de arquivos
- âœ… PrincÃ­pios fundamentais

Para **especificaÃ§Ãµes detalhadas**, consulte:
- `001-aibd-ts.mdc` â†’ Naming e organizaÃ§Ã£o TypeScript
- `002-aibd-ts-types.mdc` â†’ Tipagem TypeScript
- `003-aibd-ts-function.mdc` â†’ PadrÃµes de funÃ§Ãµes
- `010-ds-architecture.mdc` â†’ Arquitetura e diretÃ³rios
- `011-ds-component-structure.mdc` â†’ Como estruturar componentes
- `012-ds-tamagui-patterns.mdc` â†’ Como usar Tamagui
- `013-ds-storybook.mdc` â†’ Como criar stories
- `015-ds-tokens-architecture.mdc` â†’ **Arquitetura de 3 camadas de tokens** â­
- `014-ds-tokens.mdc` â†’ Uso prÃ¡tico de tokens em componentes

## ğŸ¯ Filosofia Central

Estamos construindo um **Design System completo** extraÃ­do do Figma, onde cada componente:
- âœ… Ã‰ especificado primeiro (arquivo `.md` com dados do Figma)
- âœ… Usa tokens centralizados (sem hardcode)
- âœ… Reutiliza tokens quando possÃ­vel (ex: RadioButton reutiliza cores do Checkbox)
- âœ… Implementa todas as variantes (sizes, states, variants, error modes)
- âœ… Tem stories completas no Storybook
- âœ… Possui documentaÃ§Ã£o detalhada

## ğŸ“‹ Workflow de ImplementaÃ§Ã£o

### Fluxo PadrÃ£o

```
1. EspecificaÃ§Ã£o (.md)
   â†“
2. Tokens (tokens.ts)
   â†“
3. Componente (.tsx)
   â†“
4. Stories (.stories.tsx)
   â†“
5. DocumentaÃ§Ã£o (README.md + QUICK_START.md)
   â†“
6. Export (index.ts)
```

### Passo a Passo Detalhado

#### 1. EspecificaÃ§Ã£o (Input)

- **Origem:** Arquivo `.md` em `_context/component_data/` com dados extraÃ­dos do Figma
- **ContÃ©m:**
  - Node ID e URL do Figma
  - Todas as variantes identificadas
  - Tokens extraÃ­dos (tamanhos, cores, estados)
  - Mapeamento para tokens.ts
  - Props esperadas
  - Notas de implementaÃ§Ã£o

**Exemplo:** `_context/component_data/RadioButton-clean.md`

#### 2. Adicionar Tokens

- **Arquivo:** `/tokens.ts`
- **Como fazer:** Ver estrutura completa em `015-ds-tokens-architecture.mdc`
- **Arquitetura:** 3 camadas obrigatÃ³rias (Primitive â†’ Semantic â†’ Component)
- **Regra especial deste projeto:** SEMPRE verificar se pode reutilizar tokens existentes
  - Ex: RadioButton reutiliza 100% das cores do Checkbox
  - Ver seÃ§Ã£o "PrincÃ­pios de Tokens" abaixo
- **IMPORTANTE:** Sempre use `ref()` e respeite a hierarquia de camadas

#### 3. Implementar Componente

- **Arquivo:** `/components/ComponentName/ComponentName.tsx`
- **Como fazer:** Ver detalhes em `011-ds-component-structure.mdc` e `012-ds-tamagui-patterns.mdc`
- **Pontos principais:**
  - Use `styled()` do Tamagui com variants
  - Estados internos gerenciados localmente
  - ARIA completo para acessibilidade
  - NavegaÃ§Ã£o por teclado funcional
  - Ref forwarding quando necessÃ¡rio

#### 4. Criar Stories

- **Arquivo:** `/components/ComponentName/ComponentName.stories.tsx`
- **Como fazer:** Ver detalhes em `013-ds-storybook.mdc`
- **O que incluir:**
  - Story interativa padrÃ£o
  - Todas as variantes (sizes, variants, states)
  - Casos de uso prÃ¡ticos
  - Matriz completa quando aplicÃ¡vel

#### 5. DocumentaÃ§Ã£o

- **README.md** - DocumentaÃ§Ã£o completa (800-1000 linhas)
  - VisÃ£o geral, API, casos de uso, acessibilidade
- **QUICK_START.md** - Guia rÃ¡pido (100-200 linhas)
  - Uso bÃ¡sico e exemplos principais
- **Ver:** Componentes Button/Checkbox/RadioButton como referÃªncia

#### 6. Export

- **Arquivo:** `/components/ComponentName/index.ts`
- **O que exportar:** Componente + todos os tipos
- **Ver:** `010-ds-architecture.mdc` para padrÃ£o de barrel exports

## ğŸ“ Estrutura de DiretÃ³rios

### Design System Core

```
storybook-tamagui/
â”œâ”€â”€ components/              # Todos os componentes
â”‚   â”œâ”€â”€ Button/
â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”œâ”€â”€ Button.stories.tsx
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ README.md
â”‚   â”‚   â””â”€â”€ QUICK_START.md
â”‚   â”œâ”€â”€ RadioButton/
â”‚   â”œâ”€â”€ Checkbox/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ tokens.ts               # Design tokens centralizados
â”œâ”€â”€ tamagui.config.ts       # ConfiguraÃ§Ã£o Tamagui
â””â”€â”€ assets/
    â”œâ”€â”€ icons/              # Ãcones SVG
    â””â”€â”€ fonts/              # Fontes customizadas
```

### Context & Documentation

```
.cursor/
â””â”€â”€ rules/                  # Regras de implementaÃ§Ã£o
    â”œâ”€â”€ main.mdc           # â† VOCÃŠ ESTÃ AQUI
    â”œâ”€â”€ 010-ds-architecture.mdc
    â”œâ”€â”€ 012-ds-tamagui-patterns.mdc
    â””â”€â”€ ...

_context/
â”œâ”€â”€ component_data/         # EspecificaÃ§Ãµes extraÃ­das do Figma
â”‚   â”œâ”€â”€ Button.md
â”‚   â”œâ”€â”€ RadioButton-clean.md
â”‚   â””â”€â”€ ...
â”œâ”€â”€ support-docs/           # ğŸ“ DOCUMENTAÃ‡ÃƒO ADICIONAL VAI AQUI
â”‚   â””â”€â”€ [arquivos gerados pela AI se necessÃ¡rio]
â”œâ”€â”€ icons/                  # Ãcones SVG originais
â””â”€â”€ font-files/             # Fontes originais
```

## ğŸ“ Regras de DocumentaÃ§Ã£o

### Quando Criar DocumentaÃ§Ã£o Adicional

A AI pode criar documentaÃ§Ã£o adicional **SOMENTE** quando:
1. O usuÃ¡rio solicitar explicitamente
2. For necessÃ¡rio documentar patterns complexos que nÃ£o cabem nos READMEs
3. For necessÃ¡rio criar guias de migraÃ§Ã£o ou troubleshooting

### Onde Colocar DocumentaÃ§Ã£o

- âœ… **DocumentaÃ§Ã£o de componentes:** `/components/ComponentName/README.md` e `QUICK_START.md`
- âœ… **DocumentaÃ§Ã£o adicional/support:** `/_context/support-docs/`
- âœ… **Regras de implementaÃ§Ã£o:** `/.cursor/rules/`
- âŒ **NÃƒO criar na raiz** (evitar poluir)
- âŒ **NÃƒO criar em components/** (apenas README.md e QUICK_START.md)

### Formato de DocumentaÃ§Ã£o Adicional

Se criar em `_context/support-docs/`:
- Use markdown (.md)
- Nome descritivo: `nome-do-topico.md`
- Inclua data no topo
- Referencie componentes/regras relevantes

## ğŸ¨ PrincÃ­pios de Tokens

**Ver arquitetura completa em:** `015-ds-tokens-architecture.mdc`  
**Ver uso prÃ¡tico em:** `014-ds-tokens.mdc`

### Arquitetura de 3 Camadas (OBRIGATÃ“RIA)

```
PRIMITIVE (valores raw)
    â†“ ref()
SEMANTIC (intenÃ§Ã£o e contexto)
    â†“ ref()
COMPONENT (aplicaÃ§Ã£o especÃ­fica)
```

### Regras Fundamentais

1. **NUNCA hardcode valores** - Sempre use tokens
2. **SEMPRE reutilize** - Antes de criar, verifique se jÃ¡ existe
3. **Use ref() SEMPRE** - MantÃ©m rastreabilidade entre camadas
4. **Respeite a hierarquia** - Component â†’ Semantic â†’ Primitive
5. **NÃƒO exponha primitivos** - Apenas semantic e component no export

### Checklist de Tokens

Antes de adicionar novos tokens:

**ReutilizaÃ§Ã£o:**
- [ ] Essas cores jÃ¡ existem em outro componente?
- [ ] Esses tamanhos jÃ¡ existem em outro componente?
- [ ] Esses estados jÃ¡ existem em outro componente?
- [ ] Posso reutilizar semantic tokens?

**Arquitetura:**
- [ ] Primitive tem valores raw?
- [ ] Semantic referencia APENAS primitive com ref()?
- [ ] Component referencia APENAS semantic com ref()?
- [ ] Primitivos NÃƒO estÃ£o expostos no export?
- [ ] Usei `as const` em todas as camadas?

**Exemplo:** RadioButton reutiliza 100% das cores do Checkbox (semantic.color.*).

## ğŸ¯ Checklist de ImplementaÃ§Ã£o

### Antes de ComeÃ§ar
- [ ] EspecificaÃ§Ã£o `.md` existe em `_context/component_data/`
- [ ] Ãcones necessÃ¡rios existem em `components/icons/`
- [ ] Entendi todas as variantes e estados

### Durante ImplementaÃ§Ã£o
- [ ] Tokens adicionados em `tokens.ts`
- [ ] Reutilizei tokens quando possÃ­vel
- [ ] Componente `.tsx` criado com todos os estados
- [ ] Stories `.stories.tsx` com todas as variantes
- [ ] README.md completo
- [ ] QUICK_START.md conciso
- [ ] index.ts com exports

### ApÃ³s ImplementaÃ§Ã£o
- [ ] Sem erros de lint
- [ ] Storybook renderiza corretamente
- [ ] Todas as variantes funcionam
- [ ] Acessibilidade testada (Tab, Space, Enter)
- [ ] Estados interativos funcionam (hover, focus, active)

## ğŸš« Anti-Patterns (O Que NÃƒO Fazer)

1. **âŒ Hardcode de valores** - Ver `014-ds-tokens.mdc`
2. **âŒ DuplicaÃ§Ã£o de tokens** - Ver `014-ds-tokens.mdc`
3. **âŒ DocumentaÃ§Ã£o em lugares errados** - Use apenas locais especificados acima
4. **âŒ Pular etapas do workflow** - Sempre seguir: Spec â†’ Tokens â†’ Component â†’ Stories â†’ Docs â†’ Export
5. **âŒ Criar arquivos desnecessÃ¡rios** - Apenas os especificados no workflow
6. **âŒ Ignorar especificaÃ§Ã£o Figma** - Sempre implementar conforme especificado
7. **âŒ Esquecer acessibilidade** - ARIA e navegaÃ§Ã£o por teclado sÃ£o obrigatÃ³rios

## ğŸ”— Quando Consultar Cada Regra

Use este guia para saber qual regra consultar em cada etapa:

### Durante Planejamento
- **main.mdc** (este arquivo) â†’ Overview do workflow

### Adicionando Tokens
- **015-ds-tokens-architecture.mdc** â†’ Arquitetura de 3 camadas (LEIA PRIMEIRO!)
- **014-ds-tokens.mdc** â†’ Uso prÃ¡tico de tokens em componentes

### Implementando Componente
1. **010-ds-architecture.mdc** â†’ Onde criar arquivos
2. **011-ds-component-structure.mdc** â†’ Como estruturar o componente
3. **012-ds-tamagui-patterns.mdc** â†’ Como usar Tamagui styled()
4. **001-003-aibd-ts** â†’ PadrÃµes TypeScript (naming, types, functions)

### Criando Stories
- **013-ds-storybook.mdc** â†’ Estrutura, variantes, documentaÃ§Ã£o

### Escrevendo CÃ³digo
- **001-aibd-ts.mdc** â†’ File naming, organizaÃ§Ã£o
- **002-aibd-ts-types.mdc** â†’ Tipos, interfaces
- **003-aibd-ts-function.mdc** â†’ PadrÃµes de funÃ§Ãµes

## ğŸ“Š MÃ©tricas de Sucesso

Um componente bem implementado tem:
- âœ… 82-108+ variantes funcionando (conforme especificaÃ§Ã£o)
- âœ… 0 valores hardcoded
- âœ… 100% dos tokens reutilizados quando possÃ­vel
- âœ… 8-12 stories no Storybook
- âœ… README.md com 800-1000+ linhas
- âœ… QUICK_START.md com 100-200 linhas
- âœ… 0 erros de lint
- âœ… ARIA completo
- âœ… NavegaÃ§Ã£o por teclado funcional

## ğŸ“ Exemplos de ReferÃªncia

Componentes jÃ¡ implementados que seguem estas regras:
- **Button** - Componente base com loading state
- **Checkbox** - 108 variantes, 3 estados (unchecked, checked, indeterminate)
- **RadioButton** - 82 variantes, reutiliza 100% cores do Checkbox

Consulte estes componentes como referÃªncia para novas implementaÃ§Ãµes.

---

**Ãšltima atualizaÃ§Ã£o:** 22/10/2025  
**VersÃ£o:** 1.1  
**Autor:** Design System Team - ZÃ© Delivery
